"use strict";const formElement=document.querySelector(".js-form"),inputElements=document.querySelectorAll(".js-input"),hadleForm=e=>{e.preventDefault()};formElement.addEventListener("submit",hadleForm);const handleInputs=e=>{saveDataInLS();const t=e.currentTarget.name,n=e.currentTarget.value;if("name"===t){const e=verifyName(n);document.querySelector(".js.error").innerHTML=e}},updateAllInputs=()=>{for(const e of inputElements)e.addEventListener("change",handleInputs)},verifyName=e=>{},fr=new FileReader,uploadPhotoBtn=document.querySelector(".js__photo-trigger"),photoFile=document.querySelector(".js__upload-photo"),photoPreview=document.querySelector(".js__photo-preview");let photo="";function getPhoto(e){e.preventDefault();const t=e.currentTarget.files[0];fr.addEventListener("load",writePhoto),fr.readAsDataURL(t)}function writePhoto(){photo=fr.result,updatePhoto(),saveDataInLS()}function updatePhoto(){photoPreview.style.backgroundImage=`url(${photo})`}function fakeFileClickPhoto(e){e.preventDefault(),photoFile.click()}uploadPhotoBtn.addEventListener("click",fakeFileClickPhoto),photoFile.addEventListener("change",getPhoto);const uploadBackgroundBtn=document.querySelector(".js__background-trigger"),backgroundFile=document.querySelector(".js__upload-background"),backgroundPreview=document.querySelector(".js__background-preview");let background="";function getBackground(e){e.preventDefault();const t=e.currentTarget.files[0];fr.addEventListener("load",writeBackground),fr.readAsDataURL(t)}function writeBackground(){background=fr.result,updateBackground(),saveDataInLS()}function updateBackground(){backgroundPreview.style.backgroundImage=`url(${background})`}function fakeFileClickBg(e){e.preventDefault(),backgroundFile.click()}uploadBackgroundBtn.addEventListener("click",fakeFileClickBg),backgroundFile.addEventListener("change",getBackground);const addButtonElement=document.querySelector(".js-plusButton"),addLanguageElement=document.querySelector(".js-addLanguage"),newLanguagesContainer=document.querySelector(".js-newLanguagesContainer");let newLanguagesArray=[];const handlePlusButton=e=>{e.preventDefault(),addLanguageElement.innerHTML='<input class="js-inputNewLanguage mainAdalabers__form--input form-control" placeholder="Ej. TypeScript">';document.querySelector(".js-inputNewLanguage").addEventListener("change",handleInput)},handleInput=e=>{const t=e.currentTarget.value;e.preventDefault(),paintNewLanguages(t)},paintNewLanguages=e=>{newLanguagesContainer.innerHTML+=`<p data-id=${e} class="mainAdalabers__form--newLanguageLabel js-newLanguages">${e}<i class="fa fa-times js-delete" aria-hidden="true"></i></p>`;const t=document.querySelectorAll(".js-newLanguages");addNewLanguages(e),deleteNewLanguage(t),saveDataInLS()},addNewLanguages=e=>(newLanguagesArray.includes(e)||newLanguagesArray.push(e),newLanguagesArray),deleteNewLanguage=e=>{for(const t of e)t.addEventListener("click",handleDelete)},handleDelete=e=>{const t=e.currentTarget,n=e.currentTarget.innerText;if(t.classList.add("delete-language"),newLanguagesArray.includes(n)){const e=newLanguagesArray.indexOf(n);newLanguagesArray.splice(e,1)}saveDataInLS()};addButtonElement.addEventListener("click",handlePlusButton);const languageElements=document.querySelectorAll(".js-input-languages"),employedElement=document.querySelector(".js-input-employed"),getUserData=()=>({nick_name:document.querySelector(".js-input-name").value,current_job:document.querySelector(".js-input-currentJob").value,previous_job:document.querySelector(".js-input-previousJob").value,power:document.querySelector(".js-input-power").value,promo:document.querySelector(".js-input-promo").value,programming_languages:languagesChecked(),more_programming_languages:newLanguagesArray,employed:document.querySelector(".js-input-employed").checked,photo:photo,background:background,portfolio:document.querySelector(".js-input-portfolio").value});function languagesChecked(){let e=[];for(const t of languageElements)t.checked&&e.push(t.value);return e}const saveDataInLS=()=>{const e={nick_name:document.querySelector(".js-input-name").value,current_job:document.querySelector(".js-input-currentJob").value,previous_job:document.querySelector(".js-input-previousJob").value,power:document.querySelector(".js-input-power").value,promo:document.querySelector(".js-input-promo").value,programming_languages:languagesChecked(),more_programming_languages:newLanguagesArray,employed:document.querySelector(".js-input-employed").checked,photo:photo,background:background,portfolio:document.querySelector(".js-input-portfolio").value},t=JSON.stringify(e);localStorage.setItem("userData",t)},getDataFromLS=()=>{const e=localStorage.getItem("userData");if(null!==e){const t=JSON.parse(e);document.querySelector(".js-input-name").value=t.nick_name,document.querySelector(".js-input-currentJob").value=t.current_job,document.querySelector(".js-input-previousJob").value=t.previous_job,document.querySelector(".js-input-power").value=t.power,document.querySelector(".js-input-promo").value=t.promo;for(const e of languageElements)e.checked=t.programming_languages.includes(e.value);for(const e of t.more_programming_languages)paintNewLanguages(e);t.employed&&(employedElement.checked=!0),photo=t.photo,background=t.background,document.querySelector(".js-input-portfolio").value=t.portfolio,updateAllInputs(),updatePhoto(),updateBackground()}};getDataFromLS();